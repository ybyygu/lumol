<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Adding a potential &#8212; Lumol 0.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/lumol.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Traits used for potentials" href="intro.html" />
    <link rel="prev" title="Modifying lumol" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          Lumol</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Navigation <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/index.html">Lumol concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">Input file reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Modifying lumol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../index.html" title="Previous Chapter: Modifying lumol"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Modifying lumol</span>
    </a>
  </li>
  <li>
    <a href="intro.html" title="Next Chapter: Traits used for potentials"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Traits used f... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/index.html">Lumol concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">Input file reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Modifying lumol</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Adding a potential</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
</ul>

<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="adding-a-potential">
<h1>Adding a potential<a class="headerlink" href="#adding-a-potential" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial we will teach you how to use your own potential function with
Lumol. This tutorial consists of two parts. In the first part, we will implement
the logic in a separate project using Lumol as an external library. The second
part describes the neccessary steps to implement the logic into the core package
of Lumol called <code class="docutils literal notranslate"><span class="pre">lumol-core</span></code>.</p>
<p>A potential is a function that describes the energy and force between
interaction sites. In Lumol we differentiate between two types of potentials:
First, there are potential functions that need the global state of the system,
<em>i.e.</em> all positions, as input. The Ewald summation which is used to compute
electrostatic interactions is an example for this kind of potential. We call
them <code class="docutils literal notranslate"><span class="pre">GlobalPotential</span></code>s. And second, we have potentials that take a single
geometric parameter as input. This geometric parameter can be for example a
distance or an angle. Typical examples are Van-der-Waals potentials (<em>e.g.</em>
Lennard-Jones) and potential functions describing covalent bonds (<em>e.g.</em>
harmonic potential, cosine potential, torsion, <em>etc.</em>). There are plenty of
potentials falling into this category, hence in Lumol we simply call them
<code class="docutils literal notranslate"><span class="pre">Potential</span></code>s.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are two kind of potentials. A <code class="docutils literal notranslate"><span class="pre">GlobalPotential</span></code> takes the global
systems’ state as input and a <code class="docutils literal notranslate"><span class="pre">Potential</span></code> takes a single scalar value
(distance, angle, …) as input.</p>
</div>
<p>In this tutorial we will focus on the implementation of the latter. More
specific, we will implement a potential to compute van-der-Waals interactions
between pairs of particles. We will make liberal use of the API documentation of
both the Rust standard library as well as the Lumol API. Please note that we
will point to other references, such as the Rust book, concerning general Rust
concepts to keep this tutorial brief.  If you have questions concerning Rust or
Lumol, please don’t hesitate to file an issue on <a class="reference external" href="https://github.com/lumol-org/lumol/">github</a> or join the
discussion on our <a class="reference external" href="https://gitter.im/lumol-org/lumol">gitter</a>.</p>
<p>The tutorial is structured as follows: First we will have a look at how
<code class="docutils literal notranslate"><span class="pre">Potentials</span></code> are represented (what data structures are used) and what
functionalities we have to implement. Then, we describe how we add those
functionalities. We will write a small simulation program that makes use of our
newly created potential. In the second part we talk about implementing the
potential into Lumol’s core. Rust offers beautiful utilities to add
documentation inside the code. We will have a look at the documentation of
currently implemented potentials to guide us. We will then add some tests to
make sure that our implementation is correct. This concludes the bulk the work,
but to make our new potential function accessible to all Lumol users we will
also add a parsing function. Doing so, our potential can be conveniently
specified from an input file. We conclude the tutorial by adding a short
documentation to the user manual.</p>
<p>In this tutorial, we will implement a potential to describe non-bonded pair
interactions, namely the <a class="reference external" href="http://www.sklogwiki.org/SklogWiki/index.php/Mie_potential">Mie potential</a>.</p>
<p>We have a lot to do. Ready? Let’s go.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend you read the chapters concerning <a class="reference external" href="https://doc.rust-lang.org/book/second-edition/ch05-00-structs.html">structs</a> and <a class="reference external" href="https://doc.rust-lang.org/book/second-edition/ch10-02-traits.html">traits</a> in
the rust book.</p>
</div>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Traits used for potentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="external.html">Implementation of the potential</a><ul>
<li class="toctree-l2"><a class="reference internal" href="external.html#defining-the-struct">Defining the struct</a></li>
<li class="toctree-l2"><a class="reference internal" href="external.html#implementing-potential">Implementing <code class="docutils literal notranslate"><span class="pre">Potential</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="external.html#implementing-pairpotential">Implementing <code class="docutils literal notranslate"><span class="pre">PairPotential</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="external.html#running-a-simulation">Running a simulation</a></li>
</ul>
</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
    </p>
    <p class="pull-left">
        &copy; Lumol contributors
    </p>
    <p class="text-center">
        Available on <a href="https://github.com/lumol-org/lumol">Github</a>
    </p>
  </div>
</footer>

  </body>
</html>